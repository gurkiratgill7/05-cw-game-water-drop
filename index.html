<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>The Last Drop</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="game-container">
        <!-- The main heads-up display, always visible -->
        <div id="hud">
            <div class="hud-item">Day: <span id="day-stat">0</span></div>
            <div class="hud-item">Health: <span id="health-stat">100</span>%</div>
            <div class="hud-item">Water: <span id="water-stat">0.0</span>L (<span id="water-type-stat"></span>)</div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <!-- (Content is unchanged) -->
            <img src="img/cw_logo.png" alt="Charity Water Logo" class="logo">
            <h1>The Last Drop</h1>
            <p>For millions, the search for clean water is a daily struggle. Can you survive?</p>
            <div class="difficulty-selection">
                <h3>Choose Difficulty:</h3>
                <div class="difficulty-buttons">
                    <button id="easy-btn" class="btn difficulty-btn" data-difficulty="easy">Easy (20s)</button>
                    <button id="medium-btn" class="btn difficulty-btn" data-difficulty="medium">Medium (30s)</button>
                    <button id="hard-btn" class="btn difficulty-btn" data-difficulty="hard">Hard (45s)</button>
                </div>
            </div>
            <button id="start-game-btn" class="btn" disabled>Start Day 1</button>
        </div>

        <!-- Journey Screen -->
        <div id="journey-screen" class="screen">
            <!-- (Content is unchanged) -->
            <div id="player"></div>
            <div id="end-house"></div>
            <div id="ground"></div>
        </div>

        <!-- Filter Choice Screen -->
        <div id="filter-choice-screen" class="screen modal">
            <!-- (Content is unchanged) -->
            <div class="modal-content">
                <h2>The Water is Dirty</h2>
                <p>You collected <span id="collected-water-stat">0.0</span>L of water, but it's contaminated. Drinking it is risky.</p>
                <p>You can filter it, but you will lose 25% of your water in the process. What will you do?</p>
                <div class="choices">
                    <button id="filter-now-btn" class="btn">Filter Water (Lose 25%)</button>
                    <button id="use-dirty-btn" class="btn risky-btn">Continue with Dirty Water</button>
                </div>
            </div>
        </div>
        
        <!-- NEW: Neighbor Event Screen -->
        <div id="neighbor-event-screen" class="screen modal">
            <div class="modal-content">
                <h2>A Neighbor Needs Help</h2>
                <p>Your neighbor's child is sick. They are out of water and ask if you can spare 1.0L of your supply. It might mean you go without something important.</p>
                <div class="choices">
                    <button id="share-water-btn" class="btn safe-btn">Share 1.0L of Water</button>
                    <button id="refuse-water-btn" class="btn risky-btn">Refuse, you need it</button>
                </div>
            </div>
        </div>

        <!-- Allocation Screen -->
        <div id="allocation-screen" class="screen">
            <!-- (Content is unchanged) -->
            <div class="house-background"></div>
            <div class="allocation-ui">
                <h2>Back at Home</h2>
                <p>Choose how to use your water.</p>
                <div class="choices">
                    <button class="btn choice-btn" id="drink-btn" data-cost="1.0"></button>
                    <button class="btn choice-btn" id="cook-btn" data-cost="1.5"></button>
                    <button class="btn choice-btn" id="crops-btn" data-cost="1.0"></button>
                    <button class="btn choice-btn" id="hygiene-btn" data-cost="1.0"></button>
                </div>
                <p class="status-info">Crop Health: <span id="crop-stat">50</span>%</p>
                <button id="finish-day-btn" class="btn">Finish Day</button>
            </div>
        </div>

        <!-- Day Summary and Game Over Screens -->
        <div id="summary-screen" class="screen modal">
             <!-- (Content is unchanged) -->
            <div class="modal-content">
                <h2 id="summary-title">End of Day <span id="summary-day"></span></h2>
                <p id="summary-text"></p>
                <button id="next-day-btn" class="btn">Start Next Day</button>
            </div>
        </div>
        <div id="game-over-screen" class="screen modal">
            <!-- (Content is unchanged) -->
            <div class="modal-content">
                <h2>Game Over</h2>
                <p id="game-over-reason"></p>
                <p>You survived for <span id="final-days">0</span> days.</p>
                <a href="https://www.charitywater.org/" target="_blank" class="btn">Learn More at charity: water</a>
                <button id="play-again-btn" class="btn">Play Again</button>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>